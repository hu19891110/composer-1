<html>
  <head>
    <title>Composer</title>
    <style>
      body { margin:0px; padding:0px;}
    </style>
    <script type="text/javascript" src="lib/composer.js"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
      jQuery(function() {
        jQuery("canvas").attr("width", jQuery(document).width());
        jQuery("canvas").attr("height", jQuery(document).height());
        var instance = Composer(document.getElementById("example1"), {fps: 30}, [Composer.Renderer, Composer.DragManager]);
        Composer.Renderer(instance);
        instance.renderer.start();
        
        var canvasWidth = jQuery("canvas").attr("width");
        var size= 200;
        var total = (canvasWidth/size * canvasWidth/size);

        function createNode(i) {
          var width =  jQuery("canvas").attr("width")/size;
          var x      = i%jQuery("canvas").attr("width");
          var y      = Math.floor(i/jQuery("canvas").attr("width"))*size;
          
          
          var node = Composer.create({}, [Composer.Renderable, Composer.Collidable, Composer.Draggable]);
          node.setSize(size,size).setPos(x,y,0);
        
          node.color = "rgb(" +  (i%255) + "," + (i%255) + "," + (i%255) + ")";
          node.render = function() {
            this.composer.renderer.context.fillStyle = node.color ;
            this.composer.renderer.context.fillRect(node.getPos().x,
                                                    node.getPos().y,
                                                    node.getSize().width,
                                                    node.getSize().height);
            this.composer.renderer.context.fillStyle = "#FFFFFF";
            this.composer.renderer.context.fillText("z: " + node.z, node.x+10, node.y+10);
          };
        }
        
        for (var i=0; i<total; i++)
        {
          createNode(i*size);
        }
        
        
      });
    </script>
  </head>
  <body>
      <canvas id="example1" width="300" height="300"></canvas>
  </body>
</html>
